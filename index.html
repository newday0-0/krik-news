<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Кричащая правда — №404</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Montserrat:wght@400;600;700&family=PT+Serif:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --paper:#f4ecd7;
  --ink:#111;
  --rule:#b9b19a;
  --accent:#db2b39;
  --darkness:0; /* скролл-мрак 0..1 */
}
*{box-sizing:border-box}
html,body{margin:0;background:#fff;color:#222;font-family:"PT Serif",serif;line-height:1.6}
img{max-width:100%;height:auto}

.page{
  position:relative;
  max-width:920px; margin:0 auto; padding:14px 22px 60px;
  background:var(--paper);
  box-shadow:0 0 0 1px #000 inset;
  overflow-x:hidden;
}
/* Статическое потемнение к низу */
.page:before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:
    linear-gradient(to bottom, rgba(0,0,0,0) 55%, rgba(0,0,0,.06) 100%),
    radial-gradient(rgba(0,0,0,.03) 1px, transparent 1px) 0 0/3px 3px,
    radial-gradient(rgba(0,0,0,.015) 1px, transparent 1px) 1px 1px/4px 4px;
  mix-blend-mode:multiply;
}
/* Динамическое потемнение от скролла */
.page::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:
    linear-gradient(to bottom,
      rgba(0,0,0,0) 10%,
      rgba(0,0,0, calc(var(--darkness) * 0.35)) 45%,
      rgba(0,0,0, calc(var(--darkness) * 0.65)) 75%,
      rgba(0,0,0, var(--darkness)) 100%);
  mix-blend-mode:multiply; transition:background .2s linear;
}

header.masthead{position:relative; z-index:2}
.cover{
  background:#000 url("img/cover-blank.jpg") center/cover no-repeat;
  height:160px; margin:0 -22px 10px; border-bottom:3px solid #000;
}
.h1{font:700 40px/1 "Playfair Display",serif; letter-spacing:.5px; margin:12px 0 6px; text-transform:uppercase}
.sub{font:700 15px/1.3 "Montserrat",sans-serif; letter-spacing:.06em}
.meta{font:600 13px/1.3 "Montserrat",sans-serif; color:#444; margin-top:6px}

hr.rule{border:0;border-top:1px solid var(--rule); margin:18px 0}
h2{font:700 28px/1.2 "Playfair Display",serif; margin:16px 0 8px}
h3{font:700 20px/1.2 "Montserrat",sans-serif; margin:12px 0 6px}
p{margin:10px 0}

.grid{display:grid; gap:14px}
@media(min-width:800px){ .grid{grid-template-columns:1.2fr .8fr} }

figure{margin:10px 0}
figcaption{font-size:12px;color:#555;border-top:1px solid var(--rule);padding-top:4px;font-style:italic}

/* Фото-эффекты («как отредактировано») */
.photo{position:relative; overflow:hidden; border:1px solid #d8d1ba; background:#fff}
.photo img{display:block; width:100%; filter:contrast(1.05) saturate(.95)}
.photo.grain:after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:
    radial-gradient(rgba(0,0,0,.035) 1px, transparent 1px) 0 0/3px 3px,
    radial-gradient(rgba(0,0,0,.02) 1px, transparent 1px) 1px 1px/4px 4px;
  mix-blend-mode:multiply; opacity:.9;
}
.photo.vignette:before{
  content:""; position:absolute; inset:-10%; pointer-events:none;
  background:radial-gradient(ellipse at center, rgba(0,0,0,0) 55%, rgba(0,0,0,.22) 100%);
}
.photo.halftone img{filter:grayscale(.15) contrast(1.08) saturate(.9)}
.neon img{filter:drop-shadow(0 0 6px #39a0ff) drop-shadow(0 0 14px #0b66ff)}

/* Объявление поверх плашки */
.adwrap{position:relative; border:1px dashed var(--rule)}
.adwrap img{display:block; width:100%}
.adwrap .adline{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font:700 18px/1.2 "Montserrat",sans-serif; text-align:center;
  color:#ffe9bf; text-shadow:0 1px 0 #000, 0 0 8px #ff6500;
  padding:10px;
}

/* Реплики-пузыри */
.speech{position:relative}
.bubble{
  position:absolute; max-width:46%; background:#fff; border:1px solid #111; padding:6px 8px;
  font-size:14px; line-height:1.2; border-radius:12px; box-shadow:0 1px 0 #0002;
}
.bubble:after{content:""; position:absolute; width:0;height:0;border:8px solid transparent;}
.b1{top:8%; left:8%}
.b1:after{left:10px; bottom:-16px; border-top-color:#111; transform:translateY(1px)}
.b2{bottom:10%; right:8%}
.b2:after{right:10px; top:-16px; border-bottom-color:#111; transform:translateY(-1px)}

/* Глитч-зоны */
.glitch-zone{position:relative; isolation:isolate}
.glitch-zone::after{
  content:""; position:absolute; inset:-4px; pointer-events:none; opacity:0;
  background:
    repeating-linear-gradient(0deg, rgba(255,255,255,.0) 0 3px, rgba(0,0,0,.07) 3px 6px),
    repeating-linear-gradient(90deg, rgba(255,0,0,.04) 0 2px, rgba(0,0,255,.04) 2px 4px);
  mix-blend-mode:overlay; filter:contrast(1.1) saturate(1.1);
  transition:opacity .15s;
}
.glitch-zone.glitch-active::after{ opacity:.9; animation:glScan 700ms steps(6) infinite; }
@keyframes glScan{
  0%{ transform:translateY(-2px) }
  50%{ transform:translateY(1px) }
  100%{ transform:translateY(-2px) }
}
.glitch-zone h2,.glitch-zone h3{position:relative}
.glitch-zone.glitch-active h2,.glitch-zone.glitch-active h3{animation:glJit 420ms steps(2) infinite}
@keyframes glJit {
  0%{ transform:translateX(0) skewX(0deg) }
  50%{ transform:translateX(-0.5px) skewX(-0.2deg) }
  100%{ transform:translateX(0) skewX(0deg) }
}

/* Вход по коду */
#gate {
  position:fixed; inset:0; background:#000; color:#eee;
  display:flex; align-items:center; justify-content:center; z-index:10000;
  padding:24px; text-align:center;
}
.gate-box {
  max-width:520px; width:100%;
  border:1px solid #222; background:#0b0b0b; padding:24px 18px;
  box-shadow:0 10px 40px rgba(0,0,0,.6);
}
.gate-title { font-family:"Playfair Display",serif; font-size:28px; margin:0 0 6px; }
.gate-sub { color:#bbb; font-size:14px; margin:0 0 14px; }
.gate-input { width:100%; max-width:360px; padding:10px 12px; font-size:16px; border:1px solid #666; background:#111; color:#eee; }
.gate-btn { margin-top:10px; padding:10px 14px; border:1px solid #eee; background:#111; color:#eee; cursor:pointer; }
.gate-hint { margin-top:8px; font-size:14px; color:#aaa; }

/* Финальный blackout */
#blackout{
  display:none; position:fixed; inset:0; z-index:9000;
  background:#000; color:#eee; align-items:center; justify-content:center; text-align:center; padding:20px;
}
.final-wrap{max-width:760px; margin:auto}
.final-line{display:block; margin:10px 0}
.word{opacity:0; filter:blur(6px); transition:opacity .4s ease, filter .6s ease; display:inline-block}
.word.show{opacity:1; filter:blur(0)}

input[type="text"],input[type="password"]{font:16px/1.2 "Montserrat",sans-serif}
.btn{display:inline-block; padding:9px 14px; border:1px solid #000; background:#fff; cursor:pointer; font-weight:600}
.small{font-size:13px;color:#555}
</style>
</head>
<body>

<!-- ===== ВХОД ПО КОДУ ===== -->
<div id="gate">
  <div class="gate-box">
    <div class="gate-title">Вход по коду</div>
    <div class="gate-sub">Введите код, полученный у Tails-бота</div>
    <input id="gateInput" class="gate-input" type="password" inputmode="numeric" placeholder="например, 28082003">
    <div><button id="gateBtn" class="gate-btn">Войти</button></div>
    <div id="gateHint" class="gate-hint"></div>
  </div>
</div>

<!-- ===== BLACKOUT ФИНАЛ ===== -->
<div id="blackout">
  <div class="final-wrap" id="finalText"></div>
</div>

<div class="page">
  <header class="masthead">
    <div class="cover" aria-hidden="true"></div>
    <div class="h1">КРИЧАЩАЯ ПРАВДА</div>
    <div class="sub">AT ONE, TWO, THREE — PANIC!</div>
    <div class="meta">№ 404, выпуск не найден • 30 августа 2025</div>
    <hr class="rule">
  </header>

  <section class="grid">
    <div>
      <h2>Тур Крика: от подвала до улицы</h2>
      <p><b>Афиша-2025.</b> В каждом городе — свой бонус и свой страх.</p>
      <figure class="photo neon">
        <img src="img/tour-list.jpg" alt="Афиша тура Крика со списком городов и дат">
        <figcaption>Смотри расписание — не опоздай на собственный страх.</figcaption>
      </figure>
    </div>
    <aside>
      <figure class="photo grain halftone">
        <img src="img/ad-shovel-banner.jpg" alt="Объявление: Куплю лопату — дорого! (для терапевтических нужд)">
        <figcaption>Объявление: Куплю лопату — дорого! (для терапевтических нужд).</figcaption>
      </figure>
    </aside>
  </section>

  <hr class="rule">

  <section class="grid">
    <div>
      <h2>Биография Крика — истории из жизни</h2>
      <h3>Крик на рынке</h3>
      <p>В один момент у Крика закончились деньги и он решил пойти на подработку. Взяли на рынок торговать бананами — его внешний вид как и отпугивал, так и ровно заманивал новых клиентов. Это были весёлые деньки, особенно наблюдая как Крик ведёт себя в обществе и как он решил поднять крипту на рабочем месте, в надежде на более эффективный способ заработка.</p>
      <figure class="photo grain vignette halftone">
        <img src="img/market-krik-bananas.jpg" alt="Крик торгует бананами и следит за графиками на ноутбуке">
        <figcaption>«Необычный мужик! Весёлый, ножом машет как профи — круто!» • «Всегда первым делом иду к нему…» • «Иногда кажется, что он на чём-то тяжёлом, но я не осуждаю».</figcaption>
      </figure>
    </div>
    <aside>
      <h3>Крик в музее</h3>
      <p>Наш журналист предложил Крику сходить в музей античного искусства, на что тот радостно согласился. Больше всего его заинтересовали скульптуры — с одной из них он и сфотографировался.</p>
      <figure class="photo vignette">
        <img src="img/museum-krik-sisyphus.jpg" alt="Крик в музее рядом со скульптурой Сизифа">
        <figcaption>Подпись к фото: «А нахуй он валун на гору катит?»</figcaption>
      </figure>
    </aside>
  </section>

  <hr class="rule">

  <section>
    <h2>Цитаты, рассказ о себе (от самого Крика)</h2>
    <p>Пришла и моя очередь о себе рассказать! А то больно разболтались выше, надо будет им языки подровнять. Это не дело — газета продолжается, а никто всё ещё не умер.</p>
    <p><b>Меня зовут Крик!</b> Моя профессия — сеять ужас. Моё хобби — заказывать шмот на вайлдберриз и не забирать.</p>
    <p>Бывают у меня творческие кризисы. И, знаете, в таком случае говорят, что время лечит. <b>НО Я — ПРЕДПОЧИТАЮ СКАЛЬПЕЛЬ!</b></p>
    <p>И говоря о лечении — вот вы, люди, стремитесь к вершинам… А я — к кухонному ящику. Там мой терапевт. Он говорит «резать!», и я такой: «кого?!».</p>
    <p>На прошлой неделе был в больнице… Глядя на мой скальпель, врач рассмеялся и сказал: «АХАХА ЧТО ЗА МЕТОДЫ ЛЕЧЕНИЯ». Мы подружились.</p>
    <p>И ещё один день с работы запомнился, давно было… Вот уже скоро годовщина с того момента, как та женщина орёт — буду отмечать.</p>
    <p>Что ж ещё рассказать напоследок, хм. Вчера сел на диван… проснулся через 3 дня. И в костюме Фредди Меркьюри. Я хз, ребят. Я тоже живу, ха-ха.</p>
    <p><b>Ещё увидимся, ведь я в вечном турне по вашим страхам!</b></p>
  </section>

  <hr class="rule">

  <!-- Глитч-зона -->
  <section class="grid glitch-zone">
    <div>
      <h2>Слухи и домыслы</h2>
      <figure class="photo speech">
        <img src="img/trash-scare-street.jpg" alt="Крик выскакивает у мусорного бака, рабочий удивлён (оба мультяшные)">
        <div class="bubble b1">— Бу.</div>
        <div class="bubble b2">— Ты чо, ахуел?</div>
        <figcaption>Стенограмма редакции.</figcaption>
      </figure>

      <p>«Вот хуесос. Ладно, отвечу тем же» — рецензия Крика на налоговую. Работники остались без пальцев.</p>
      <p>«Ну я же психбольная: сначала делаю, потом думаю» — внутренний регламент редакции после работы с Криком.</p>
    </div>

    <aside>
      <figure class="photo grain halftone">
        <img src="img/classroom-krik.jpg" alt="Крик сидит в аудитории и оборачивается">
        <figcaption>Комментарий Крика: «да, понял по итогу нихуя».</figcaption>
      </figure>
    </aside>
  </section>

  <!-- Тёмный финал + глитчи -->
  <section class="dark glitch-zone" style="margin-top:18px; padding:16px; background:#0d0d0d; color:#eaeaea; border:1px solid #222">
    <h2>…Темнее к концовке</h2>
    <p>Ладно, вы действительно думали, что просто возьму и уйду отсюда? Хрена лысого! Продолжаю свою речь, ребятки, не буду вас оставлять грустить.</p>
    <p>Я люблю свою работу и жизнь. Это действительно приносит мне удовольствие. Но... есть один момент, что меня гложит.</p>
    <p>Вот вы... бегаете от меня. Пищите. Молите о пощаде. — это правильно, и это приносит мне неописуемое удовольствие.</p>
    <p>Однако… однажды я встретил нечто. Оно не испугалось. Не торопилось. За полчаса преодолевает сантиметр. Оно никогда не бежит. Оно… ползёт.</p>

    <p style="font-weight:700; font-size:20px; letter-spacing:.02em; margin-top:16px">Оно почти как ты… Данила.</p>
    <p>Ты ведь знаешь, о ком я. <br>Мой самый страшный кошмар. <br>Моё… проклятие. <br>Ты знаешь моего врага в лицо?</p>

    <div style="margin-top:12px">
      <label for="secret" class="small">Впиши его имя:</label><br>
      <input id="secret" type="text" placeholder="подсказка: не бегает…" style="padding:9px 10px; width:260px; margin-right:6px">
      <button id="checkBtn" class="btn">Проверить</button>
      <div id="hint" class="small" style="margin-top:6px; color:#bbb"></div>
    </div>
  </section>

</div><!-- /.page -->

<script>
/* === Настройки === */
const ENTRY_CODE = "28082003";
const NEXT_URL = "https://example.com/next-site"; // поставь ссылку на следующий сайт

/* === ВХОД ПО КОДУ === */
(function setupGate(){
  const gate = document.getElementById('gate');
  const input = document.getElementById('gateInput');
  const btn = document.getElementById('gateBtn');
  const hint = document.getElementById('gateHint');

  if (sessionStorage.getItem('krik_gate_ok') === '1') {
    gate.style.display = 'none';
    return;
  }
  function tryOpen(){
    const val = (input.value || '').replace(/\s+/g,'').trim();
    if (val === ENTRY_CODE) {
      sessionStorage.setItem('krik_gate_ok','1');
      gate.style.display = 'none';
    } else {
      hint.textContent = "Неверно. Подсказка: дата, которую знает бот.";
    }
  }
  btn.addEventListener('click', tryOpen);
  input.addEventListener('keydown', (e)=>{ if(e.key==='Enter') tryOpen(); });
})();

/* === Потемнение от скролла === */
(function(){
  const root = document.documentElement;
  const page = document.querySelector('.page');
  function updateDark(){
    const max = page.scrollHeight - window.innerHeight;
    const y = Math.max(0, Math.min(max, window.scrollY || window.pageYOffset || 0));
    let t = max > 0 ? (y / max) : 0;
    t = Math.pow(t, 1.15);
    const cap = 0.85;
    root.style.setProperty('--darkness', (t * cap).toFixed(3));
  }
  updateDark();
  window.addEventListener('scroll', updateDark, {passive:true});
  window.addEventListener('resize', updateDark);
})();

/* === Ступенчатые глитчи по секциям === */
(function(){
  const zones = document.querySelectorAll('.glitch-zone');
  if(!('IntersectionObserver' in window) || zones.length===0) return;
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{
      if(e.isIntersecting){
        e.target.classList.add('glitch-active');
        setTimeout(()=> e.target.classList.remove('glitch-active'), 600);
        setTimeout(()=> e.target.classList.add('glitch-active'), 1000);
        setTimeout(()=> e.target.classList.remove('glitch-active'), 1600);
        setTimeout(()=> e.target.classList.add('glitch-active'), 2200);
      }
    });
  },{ threshold: 0.35 });
  zones.forEach(z => io.observe(z));
})();

/* === Финал: слова из темноты после правильного ответа === */
function playFinal(){
  const blackout = document.getElementById('blackout');
  const finalText = document.getElementById('finalText');
  blackout.style.display = 'flex';
  finalText.innerHTML = `
    <span class="final-line" id="l1">Ладно… Ты узнал.</span>
    <span class="final-line" id="l2">Похоже, теперь ты готов.</span>
    <span class="final-line" id="l3">Но не говори ей, что я тебе это сказал.</span>
    <button id="goNext" style="display:none;margin-top:18px;padding:10px 14px;border:1px solid #eee;background:#111;color:#eee;cursor:pointer;">Продолжить</button>
  `;
  ['l1','l2','l3'].forEach(id=>{
    const node = document.getElementById(id);
    const words = node.textContent.trim().split(/\s+/);
    node.textContent = '';
    words.forEach(w=>{
      const span = document.createElement('span');
      span.className = 'word';
      span.textContent = w + ' ';
      node.appendChild(span);
    });
  });
  let delay = 500;
  const allWords = Array.from(finalText.querySelectorAll('.word'));
  allWords.forEach(w=>{
    setTimeout(()=> w.classList.add('show'), delay);
    delay += 180;
  });
  setTimeout(()=>{
    const btn = document.getElementById('goNext');
    btn.style.display = 'inline-block';
    btn.addEventListener('click', ()=> window.location.href = NEXT_URL);
  }, delay + 300);
}

/* === Проверка «улитки» === */
(function(){
  const ok = ["улитка","улиточка","snail","ulitka","ulitochka"];
  const input = document.getElementById('secret');
  const btn = document.getElementById('checkBtn');
  const hint = document.getElementById('hint');
  function norm(s){ return (s||"").toLowerCase().replace(/\s+/g,'').trim(); }
  if(btn){
    btn.addEventListener('click', ()=>{
      const val = norm(input.value);
      if(ok.includes(val)){
        playFinal();
      } else {
        hint.textContent = "Не то имя. Подумай о тех, кто не бегает… 🐌";
      }
    });
  }
})();
</script>
</body>
</html>
